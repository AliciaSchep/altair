---
title: Twiddling Around
output: html_document
---

```{r}
library("altair")
library("reticulate")
```

Here's how we could make a chart-spec using Python:

```{python eval = FALSE}
import altair as alt
from vega_datasets import data

iris = data.iris()

p2 = alt.Chart(iris).mark_point().encode(
    x='petalLength',
    y='petalWidth',
    color='species'
)

p3 = p2.to_dict()
```

Here's an equivalent way using R.

Note that we seem to have to use `r_to_py()` - so we might consider exporting that function from __reticulate__. We also may wish to import the __json__ python package.

```{r}


p <- altair$Chart(r_to_py(iris[1:3, ]))$mark_point()$encode(
    x = "Petal.Length",
    y = "Petal.Width",
    color = "Species"
)

js <- import("json")
tmp <- js$dumps(p$to_dict())
```

## htmlwidget

To be an htmlwidget, we need three things:

1. A collection of library files, with a manifest.
2. A function to bind the widget to R.
3. Some to bind the widget to Javascript.

Let's start with what we will need for files. We have an Rmd that downloads the files and puts them into place. 

We now need a function that binds the widget to R. This function is called `vegalite()`, and it takes an `altair$Chart()` object as its main argument.

Finally, we need a Javascript-binding bit of code.

If I've done this right, then this should work:

```{r}
vegalite(p)
```


